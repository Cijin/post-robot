!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("postRobot",[],e):"object"==typeof exports?exports.postRobot=e():n.postRobot=e()}("undefined"!=typeof self?self:this,function(){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=9)}([function(n,e,t){"use strict";var r=t(10);t.d(e,"getActualDomain",function(){return r.a}),t.d(e,"getAllWindows",function(){return r.b}),t.d(e,"getAncestor",function(){return r.c}),t.d(e,"getDomain",function(){return r.d}),t.d(e,"getUserAgent",function(){return r.e}),t.d(e,"isActuallySameDomain",function(){return r.f}),t.d(e,"isAncestor",function(){return r.g}),t.d(e,"isWindow",function(){return r.h}),t.d(e,"isWindowClosed",function(){return r.i}),t.d(e,"linkFrameWindow",function(){return r.j}),t.d(e,"matchDomain",function(){return r.k}),t.d(e,"stringifyDomainPattern",function(){return r.l});var o=t(11);t.n(o),t(5)},function(n,e,t){"use strict";function r(n){try{if(!n)return!1;if("undefined"!=typeof Promise&&n instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&n instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&n instanceof window.constructor)return!1;var e={}.toString;if(e){var t=e.call(n);if("[object Window]"===t||"[object global]"===t||"[object DOMWindow]"===t)return!1}if("function"==typeof n.then)return!0}catch(n){return!1}return!1}function o(){var n=void 0;if("undefined"!=typeof window)n=window;else{if("undefined"==typeof window)throw new TypeError("Can not find global");n=window}var e=n.__zalgopromise__=n.__zalgopromise__||{};return e.flushPromises=e.flushPromises||[],e.activeCount=e.activeCount||0,e.possiblyUnhandledPromiseHandlers=e.possiblyUnhandledPromiseHandlers||[],e.dispatchedErrors=e.dispatchedErrors||[],e}var i=function(){function n(e){var t=this;if(function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],e){var r=void 0,o=void 0,i=!1,a=!1,u=!1;try{e(function(n){u?t.resolve(n):(i=!0,r=n)},function(n){u?t.reject(n):(a=!0,o=n)})}catch(n){return void this.reject(n)}u=!0,i?this.resolve(r):a&&this.reject(o)}}return n.prototype.resolve=function(n){if(this.resolved||this.rejected)return this;if(r(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},n.prototype.reject=function(n){var e=this;if(this.resolved||this.rejected)return this;if(r(n))throw new Error("Can not reject promise with another promise");if(!n){var t=n&&"function"==typeof n.toString?n.toString():Object.prototype.toString.call(n);n=new Error("Expected reject to be called with Error, got "+t)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){e.errorHandled||function(n,e){if(-1===o().dispatchedErrors.indexOf(n)){o().dispatchedErrors.push(n),setTimeout(function(){throw n},1);for(var t=0;t<o().possiblyUnhandledPromiseHandlers.length;t++)o().possiblyUnhandledPromiseHandlers[t](n,e)}}(n,e)},1),this.dispatch(),this},n.prototype.asyncReject=function(n){this.errorHandled=!0,this.reject(n)},n.prototype.dispatch=function(){var e=this,t=this.dispatching,i=this.resolved,a=this.rejected,u=this.handlers;if(!t&&(i||a)){this.dispatching=!0,o().activeCount+=1;for(var c=function(t){var o=u[t],c=o.onSuccess,s=o.onError,f=o.promise,d=void 0;if(i)try{d=c?c(e.value):e.value}catch(n){return f.reject(n),"continue"}else if(a){if(!s)return f.reject(e.error),"continue";try{d=s(e.error)}catch(n){return f.reject(n),"continue"}}d instanceof n&&(d.resolved||d.rejected)?(d.resolved?f.resolve(d.value):f.reject(d.error),d.errorHandled=!0):r(d)?d instanceof n&&(d.resolved||d.rejected)?d.resolved?f.resolve(d.value):f.reject(d.error):d.then(function(n){f.resolve(n)},function(n){f.reject(n)}):f.resolve(d)},s=0;s<u.length;s++)c(s);u.length=0,this.dispatching=!1,o().activeCount-=1,0===o().activeCount&&n.flushQueue()}},n.prototype.then=function(e,t){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for error handler");var r=new n;return this.handlers.push({promise:r,onSuccess:e,onError:t}),this.errorHandled=!0,this.dispatch(),r},n.prototype.catch=function(n){return this.then(void 0,n)},n.prototype.finally=function(e){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.finally expected a function");return this.then(function(t){return n.try(e).then(function(){return t})},function(t){return n.try(e).then(function(){throw t})})},n.prototype.timeout=function(n,e){var t=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){t.resolved||t.rejected||t.reject(e||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(n){return clearTimeout(r),n})},n.prototype.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},n.resolve=function(e){return e instanceof n?e:r(e)?new n(function(n,t){return e.then(n,t)}):(new n).resolve(e)},n.reject=function(e){return(new n).reject(e)},n.all=function(e){var t=new n,o=e.length,i=[];if(!o)return t.resolve(i),t;for(var a=function(a){var u=e[a];if(u instanceof n){if(u.resolved)return i[a]=u.value,o-=1,"continue"}else if(!r(u))return i[a]=u,o-=1,"continue";n.resolve(u).then(function(n){i[a]=n,0==(o-=1)&&t.resolve(i)},function(n){t.reject(n)})},u=0;u<e.length;u++)a(u);return 0===o&&t.resolve(i),t},n.hash=function(e){var t={};return n.all(Object.keys(e).map(function(r){return n.resolve(e[r]).then(function(n){t[r]=n})})).then(function(){return t})},n.map=function(e,t){return n.all(e.map(t))},n.onPossiblyUnhandledException=function(n){return function(n){return o().possiblyUnhandledPromiseHandlers.push(n),{cancel:function(){o().possiblyUnhandledPromiseHandlers.splice(o().possiblyUnhandledPromiseHandlers.indexOf(n),1)}}}(n)},n.try=function(e,t,r){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var o=void 0;try{o=e.apply(t,r||[])}catch(e){return n.reject(e)}return n.resolve(o)},n.delay=function(e){return new n(function(n){setTimeout(n,e)})},n.isPromise=function(e){return!!(e&&e instanceof n)||r(e)},n.flush=function(){var e=new n;return o().flushPromises.push(e),0===o().activeCount&&n.flushQueue(),e},n.flushQueue=function(){var n=o().flushPromises;o().flushPromises=[];for(var e=0,t=null==n?0:n.length;e<t;e++)n[e].resolve()},n}();t.d(e,"a",function(){return i})},function(n,e,t){"use strict";t(6);var r=t(7);t.d(e,"addEventListener",function(){return r.a}),t(12),t(13),t(8);var o=t(4);t.d(e,"getOrSet",function(){return o.e}),t.d(e,"isRegex",function(){return o.g}),t.d(e,"memoizePromise",function(){return o.i}),t.d(e,"noop",function(){return o.j}),t.d(e,"once",function(){return o.k}),t.d(e,"safeInterval",function(){return o.m}),t.d(e,"stringifyError",function(){return o.o}),t.d(e,"uniqueID",function(){return o.p}),t.d(e,"weakMapMemoizePromise",function(){return o.q}),t(14);var i=t(15);t.n(i),t(16),t(17)},function(n,e,t){"use strict";t.d({},"WeakMap",function(){return u});var r=t(0);function o(n,e){for(var t=0;t<n.length;t++)try{if(n[t]===e)return t}catch(n){}return-1}var i=Object.defineProperty,a=Date.now()%1e9,u=function(){function n(){if(function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),a+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+a,function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var n=new WeakMap,e={};return Object.freeze(e),n.set(e,"__testvalue__"),"__testvalue__"===n.get(e)}catch(n){return!1}}())try{this.weakmap=new WeakMap}catch(n){}this.keys=[],this.values=[]}return n.prototype._cleanupClosedWindows=function(){for(var n=this.weakmap,e=this.keys,t=0;t<e.length;t++){var o=e[t];if(Object(r.isWindow)(o)&&Object(r.isWindowClosed)(o)){if(n)try{n.delete(o)}catch(n){}e.splice(t,1),this.values.splice(t,1),t-=1}}},n.prototype.isSafeToReadWrite=function(n){if(Object(r.isWindow)(n))return!1;try{n&&n.self,n&&n[this.name]}catch(n){return!1}return!0},n.prototype.set=function(n,e){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.set(n,e)}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var r=this.name,a=n[r];a&&a[0]===n?a[1]=e:i(n,r,{value:[n,e],writable:!0})}else{this._cleanupClosedWindows();var u=this.keys,c=this.values,s=o(u,n);-1===s?(u.push(n),c.push(e)):c[s]=e}},n.prototype.get=function(n){if(!n)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(n))return e.get(n)}catch(n){delete this.weakmap}if(!this.isSafeToReadWrite(n)){this._cleanupClosedWindows();var t=o(this.keys,n);if(-1===t)return;return this.values[t]}var r=n[this.name];if(r&&r[0]===n)return r[1]},n.prototype.delete=function(n){if(!n)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.delete(n)}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var t=n[this.name];t&&t[0]===n&&(t[0]=t[1]=void 0)}else{this._cleanupClosedWindows();var r=this.keys,i=o(r,n);-1!==i&&(r.splice(i,1),this.values.splice(i,1))}},n.prototype.has=function(n){if(!n)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{return e.has(n)}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var t=n[this.name];return!(!t||t[0]!==n)}return this._cleanupClosedWindows(),-1!==o(this.keys,n)},n.prototype.getOrSet=function(n,e){if(this.has(n))return this.get(n);var t=e();return this.set(n,t),t},n}();t.d(e,"a",function(){return u})},function(n,e,t){"use strict";e.p=a,e.d=function(){if("undefined"!=typeof window)return window;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("No global found")},e.h=function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new o.a;function i(){for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];var a=r.getOrSet(t.thisNamespace?this:n,function(){return{}}),u=c(o),s=t.time;if(a[u]&&s&&Date.now()-a[u].time<s&&delete a[u],a[u])return a[u].value;var f=Date.now(),d=n.apply(this,arguments);return a[u]={time:f,value:d},a[u].value}return i.reset=function(){r.delete(t.thisNamespace?e:n)},t.name&&(i.displayName=t.name+":memoized"),i},e.i=function(n){var e={};function t(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=c(r);return e.hasOwnProperty(i)?e[i]:(e[i]=n.apply(this,arguments).finally(function(){delete e[i]}),e[i])}return t.reset=function(){e={}},t},e.l=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function t(){return r.a.try(n,this,arguments)}return e.name&&(t.displayName=e.name+":promisified"),t},e.f=function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=n.__inline_memoize_cache__=n.__inline_memoize_cache__||{},o=c(t);return r.hasOwnProperty(o)?r[o]:r[o]=e.apply(void 0,t)},e.j=function(){},e.k=function(n){var e=!1;return function(){if(!e)return e=!0,n.apply(this,arguments)}},e.o=function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+Object.prototype.toString.call(e)+">";if("string"==typeof e)return e;if(e instanceof Error){var r=e&&e.stack,o=e&&e.message;if(r&&o)return-1!==r.indexOf(o)?r:o+"\n"+r;if(r)return r;if(o)return o}return"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}catch(e){return"Error while stringifying error: "+n(e,t+1)}},e.n=function(n){return"string"==typeof n?n:n&&"function"==typeof n.toString?n.toString():Object.prototype.toString.call(n)},e.c=function(n,e){if(!e)return n;if(Object.assign)return Object.assign(n,e);for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},e.m=function(n,e){var t=void 0;return function r(){t=setTimeout(function(){n(),r()},e)}(),{cancel:function(){clearTimeout(t)}}},e.a=function(n){return n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()},e.b=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=void 0;return function(){var r=this,o=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(r,o)},e)}},e.g=function(n){return"[object RegExp]"===Object.prototype.toString.call(n)},t.d(e,"q",function(){return s}),e.e=function(n,e,t){if(n.hasOwnProperty(e))return n[e];var r=t();return n[e]=r,r};var r=t(1),o=t(3),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function a(){var n,e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+(n=(new Date).toISOString().slice(11,19).replace("T","."),window.btoa(n)).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var u=void 0;function c(n){try{return JSON.stringify(Array.prototype.slice.call(n),function(n,e){return"function"==typeof e?"memoize["+function(n){if(u=u||new o.a,null===n||void 0===n||"object"!==(void 0===n?"undefined":i(n))&&"function"!=typeof n)throw new Error("Invalid object");var e=u.get(n);return e||(e=(void 0===n?"undefined":i(n))+":"+a(),u.set(n,e)),e}(e)+"]":e})}catch(n){throw new Error("Arguments not serializable -- can not be used to memoize")}}var s=function(n){var e=new o.a;return function(t){var r=this;return e.getOrSet(t,function(){return n.call(r,t).finally(function(){e.delete(t)})})}}},function(n,e,t){"use strict";t.d(e,"a",function(){return r}),t.d(e,"b",function(){return o});var r={MOCK:"mock:",FILE:"file:",ABOUT:"about:"},o="*"},function(n,e,t){"use strict";e.a=function(){return!!(window.navigator.mockUserAgent||window.navigator.userAgent).match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)}},function(n,e,t){"use strict";t(1),t(0),t(3);var r=t(4);t(6),e.b=function n(){return Object(r.f)(n,function(){try{if("undefined"==typeof window)return!1;if(window.localStorage){var n=Math.random().toString();window.localStorage.setItem("__test__localStorage__",n);var e=window.localStorage.getItem("__test__localStorage__");if(window.localStorage.removeItem("__test__localStorage__"),n===e)return!0}}catch(n){}return!1})},e.a=function(n,e,t){return n.addEventListener(e,t),{cancel:function(){n.removeEventListener(e,t)}}},"function"==typeof Symbol&&Symbol.iterator,Object.assign,Object.create(Error.prototype)},function(n,e,t){"use strict";e.a=function n(e){var t=e.name,i=e.version,a=void 0===i?"latest":i,u=e.lifetime,c=void 0===u?3e5:u;return Object(r.f)(n,function(){var n="__"+t+"_"+a+"_storage__",e=void 0;function i(t){var i=Object(o.b)(),a=void 0;if(e&&(a=e),!a&&i){var u=window.localStorage.getItem(n);u&&(a=JSON.parse(u))}a||(a=Object(r.d)()[n]),a||(a={id:Object(r.p)()}),a.id||(a.id=Object(r.p)()),e=a;var c=t(a);return i?window.localStorage.setItem(n,JSON.stringify(a)):Object(r.d)()[n]=a,e=null,c}function u(n){return i(function(e){var t=e.__session__,o=Date.now();return t&&o-t.created>c&&(t=null),t||(t={guid:Object(r.p)(),created:o}),e.__session__=t,n(t)})}return{getState:i,getID:function(){return i(function(n){return n.id})},getSessionState:function(n){return u(function(e){return e.state=e.state||{},n(e.state)})},getSessionID:function(){return u(function(n){return n.guid})}}},[{name:t,version:a,lifetime:c}])};var r=t(4),o=t(7)},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};t.d(r,"markWindowKnown",function(){return O}),t.d(r,"serializeMessage",function(){return k}),t.d(r,"deserializeMessage",function(){return C}),t.d(r,"cleanUpWindow",function(){return sn}),t.d(r,"Promise",function(){return u.a}),t.d(r,"bridge",function(){return fn}),t.d(r,"parent",function(){return cn}),t.d(r,"send",function(){return V}),t.d(r,"request",function(){return Z}),t.d(r,"sendToParent",function(){return $}),t.d(r,"client",function(){return nn}),t.d(r,"on",function(){return rn}),t.d(r,"listen",function(){return tn}),t.d(r,"once",function(){return on}),t.d(r,"listener",function(){return an}),t.d(r,"CONFIG",function(){return h}),t.d(r,"disable",function(){return un});var o,i=t(3),a=t(0),u=t(1),c=t(2),s={REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},f={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},d={POSTROBOT:"__postRobot__"},l="*",w={CROSS_DOMAIN_ZALGO_PROMISE:"cross_domain_zalgo_promise",CROSS_DOMAIN_FUNCTION:"cross_domain_function",CROSS_DOMAIN_WINDOW:"cross_domain_window"},h={ALLOW_POSTMESSAGE_POPUP:!("__ALLOW_POSTMESSAGE_POPUP__"in window)||window.__ALLOW_POSTMESSAGE_POPUP__,BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:2e3,ACK_TIMEOUT_KNOWN:1e4,RES_TIMEOUT:-1,ALLOWED_POST_MESSAGE_METHODS:(o={},o.postrobot_post_message=!0,o.postrobot_bridge=!0,o.postrobot_global=!0,o)};0===window.location.href.indexOf("file:")&&(h.ALLOW_POSTMESSAGE_POPUP=!0);var p=window[d.POSTROBOT]=window[d.POSTROBOT]||{};function m(n){return p.helloPromises.getOrSet(n,function(){return new u.a})}p.registerSelf=function(){},p.instanceID=p.instanceID||Object(c.uniqueID)(),p.helloPromises=p.helloPromises||new i.a;var v=Object(c.once)(function(){p.on(f.HELLO,{domain:l},function(n){var e=n.source,t=n.origin;return m(e).resolve({win:e,domain:t}),{instanceID:p.instanceID}})});function y(n){return p.send(n,f.HELLO,{},{domain:l,timeout:-1}).then(function(e){var t=e.origin,r=e.data.instanceID;return m(n).resolve({win:n,domain:t}),{win:n,domain:t,instanceID:r}})}var g=Object(c.weakMapMemoizePromise)(function(n){return y(n).then(function(n){return n.instanceID})});function O(n){if(window.knownWindows=window.knownWindows.filter(function(n){return!Object(a.isWindowClosed)(n)}),-1===window.knownWindows.indexOf(n)){window.knownWindows.push(n);for(var e=0,t=window.onKnownWindow,r=null==t?0:t.length;e<r;e++)(0,t[e])(n)}}window.knownWindows=window.knownWindows||[],window.onKnownWindow=window.onKnownWindow||[];var E,_={FUNCTION:"function",ERROR:"error",PROMISE:"promise",REGEX:"regex",DATE:"date",ARRAY:"array",OBJECT:"object",STRING:"string",NUMBER:"number",BOOLEAN:"boolean",NULL:"null",UNDEFINED:"undefined"},b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function S(n){return"object"===(void 0===n?"undefined":b(n))&&null!==n&&"string"==typeof n.__type__}function W(n){return void 0===n?_.UNDEFINED:null===n?_.NULL:Array.isArray(n)?_.ARRAY:"function"==typeof n?_.FUNCTION:"object"===(void 0===n?"undefined":b(n))?n instanceof Error?_.ERROR:"function"==typeof n.then?_.PROMISE:"[object RegExp]"===Object.prototype.toString.call(n)?_.REGEX:"[object Date]"===Object.prototype.toString.call(n)?_.DATE:_.OBJECT:"string"==typeof n?_.STRING:"number"==typeof n?_.NUMBER:"boolean"==typeof n?_.BOOLEAN:void 0}function j(n,e){return{__type__:n,__val__:e}}var I,D=((E={})[_.FUNCTION]=function(){},E[_.ERROR]=function(n){var e=n.message,t=n.stack,r=n.code;return j(_.ERROR,{message:e,stack:t,code:r})},E[_.PROMISE]=function(){},E[_.REGEX]=function(n){return j(_.REGEX,n.source)},E[_.DATE]=function(n){return j(_.DATE,n.toJSON())},E[_.ARRAY]=function(n){return n},E[_.OBJECT]=function(n){return n},E[_.STRING]=function(n){return n},E[_.NUMBER]=function(n){return n},E[_.BOOLEAN]=function(n){return n},E[_.NULL]=function(n){return n},E),A={},P=((I={})[_.FUNCTION]=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},I[_.ERROR]=function(n){var e=n.message,t=n.stack,r=n.code,o=new Error(e);return o.code=r,o.stack=t+"\n\n"+o.stack,o},I[_.PROMISE]=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},I[_.REGEX]=function(n){return new RegExp(n)},I[_.DATE]=function(n){return new Date(n)},I[_.ARRAY]=function(n){return n},I[_.OBJECT]=function(n){return n},I[_.STRING]=function(n){return n},I[_.NUMBER]=function(n){return n},I[_.BOOLEAN]=function(n){return n},I[_.NULL]=function(n){return n},I),R={};p.methods=p.methods||new i.a;var N=Object(c.once)(function(){p.on(f.METHOD,{origin:l},function(n){var e=n.source,t=n.origin,r=n.data,o=p.methods.get(e);if(!o)throw new Error("Could not find any methods this window has privileges to call");var i=o[r.id];if(!i)throw new Error("Could not find method with id: "+r.id);if(!Object(a.matchDomain)(i.domain,t))throw new Error("Method domain "+i.domain+" does not match origin "+t);return u.a.try(function(){return i.val.apply({source:e,origin:t,data:r},r.args)}).then(function(n){return{result:n,id:r.id,name:r.name}})})});function T(n,e,t,r){var o=Object(c.uniqueID)(),i=p.methods.get(n);return i||(i={},p.methods.set(n,i)),i[o]={domain:e,val:t},N(),j(w.CROSS_DOMAIN_FUNCTION,{id:o,name:t.name||r})}var M=function(){function n(e){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.serializedWindow=e,this.actualWindowPromise=new u.a,this.serializedWindow.getInstanceID=Object(c.memoizePromise)(this.serializedWindow.getInstanceID),this.waitForWindows()}return n.prototype.waitForWindows=function(){var n=this;!function(n){window.onKnownWindow.push(n);for(var e=0,t=window.knownWindows,r=null==t?0:t.length;e<r;e++)n(t[e])}(function(e){n.matchWindow(e).then(function(t){t&&n.setWindow(e)}).catch(c.noop)})},n.prototype.setLocation=function(n){var e=this;return u.a.try(function(){if(!e.actualWindow)return e.serializedWindow.setLocation(n);e.actualWindow.location=n}).then(function(){return e})},n.prototype.setName=function(n){var e=this;return u.a.try(function(){if(!e.actualWindow)return e.serializedWindow.setName(n);e.actualWindow.name=n}).then(function(){return e})},n.prototype.close=function(){var n=this;return u.a.try(function(){if(!n.actualWindow)return n.serializedWindow.close();n.actualWindow.close()}).then(function(){return n})},n.prototype.focus=function(){var n=this;return u.a.try(function(){if(!n.actualWindow)return n.serializedWindow.focus();n.actualWindow.focus()}).then(function(){return n})},n.prototype.setWindow=function(n){this.actualWindow=n,this.actualWindowPromise.resolve(n)},n.prototype.matchWindow=function(n){var e=this;return u.a.try(function(){return e.actualWindow?n===e.actualWindow:u.a.all([e.getInstanceID(),g(n)]).then(function(n){return n[0]===n[1]})})},n.prototype.hasWindow=function(){return Boolean(this.actualWindow)},n.prototype.awaitWindow=function(){return this.actualWindowPromise},n.prototype.getSerializedID=function(){return this.serializedWindow.serializedID},n.prototype.getInstanceID=function(){return this.actualWindow?g(this.actualWindow):this.serializedWindow.getInstanceID()},n.isProxyWindow=function(e){return e instanceof n},n}();function k(n,e,t){var r;return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,t=JSON.stringify(n,function(n){var t=this[n];if(S(this))return t;var r=W(t);if(!r)return t;var o=e[r]||D[r];return o?o(t,n):t});return void 0===t?_.UNDEFINED:t}(t,((r={})[_.PROMISE]=function(t,r){return function(n,e,t,r){return j(w.CROSS_DOMAIN_ZALGO_PROMISE,{then:T(n,e,function(n,e){return t.then(n,e)},r)})}(n,e,t,r)},r[_.FUNCTION]=function(t,r){return T(n,e,t,r)},r[_.OBJECT]=function(n){return Object(a.isWindow)(n)||M.isProxyWindow(n)?(e=n,p.serializedWindows.getOrSet(e,function(){return j(w.CROSS_DOMAIN_WINDOW,M.isProxyWindow(e)?{serializedID:e.getSerializedID(),getInstanceID:function(){return e.getInstanceID()},close:function(){return e.close()},focus:function(){return e.focus()},setLocation:function(n){return e.setLocation(n)},setName:function(n){return e.setName(n)}}:{serializedID:Object(c.uniqueID)(),getInstanceID:function(){return g(e)},close:function(){return u.a.try(function(){return e.close()})},focus:function(){return u.a.try(function(){return e.focus()})},setLocation:function(n){return u.a.try(function(){e.location=n})},setName:function(n){return u.a.try(function(){e.name=n})}})})):n;var e},r))}function C(n,e,t){var r;return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;if(n!==_.UNDEFINED)return JSON.parse(n,function(n,t){if(S(this))return t;var r=void 0,o=void 0;if(S(t)?(r=t.__type__,o=t.__val__):(r=W(t),o=t),!r)return o;var i=e[r]||P[r];return i?i(o,n):o})}(t,((r={})[w.CROSS_DOMAIN_ZALGO_PROMISE]=function(n){return e=n.then,new u.a(e);var e},r[w.CROSS_DOMAIN_FUNCTION]=function(t){return function(n,e,t){var r=t.id,o=t.name;function i(){var t=Array.prototype.slice.call(arguments);return p.send(n,f.METHOD,{id:r,name:o,args:t},{domain:e}).then(function(n){return n.data.result})}return i.__name__=o,i.__xdomain__=!0,i.source=n,i.origin=e,i}(n,e,t)},r[w.CROSS_DOMAIN_WINDOW]=function(n){return e=n,Object(c.getOrSet)(p.deseserializedWindows,e.serializedID,function(){return new M(e)});var e},r))}p.serializedWindows=p.serializedWindows||new i.a,p.deseserializedWindows={};var x={postrobot_post_message:function(n,e,t){(Array.isArray(t)?t:"string"==typeof t?[t]:[l]).map(function(e){if(0===e.indexOf("mock:")){if("file:"===window.location.protocol)return l;if(!Object(a.isActuallySameDomain)(n))throw new Error("Attempting to send messsage to mock domain "+e+", but window is actually cross-domain");return Object(a.getActualDomain)(n)}return 0===e.indexOf("file:")?l:e}).forEach(function(t){return n.postMessage(e,t)})}},L=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function U(n,e,t){return u.a.try(function(){var r;if(Object(a.isWindowClosed)(n))throw new Error("Window is closed");var o=k(n,e,((r={})[d.POSTROBOT]=L({id:Object(c.uniqueID)()},t),r)),i=[];return u.a.map(Object.keys(x),function(t){return u.a.try(function(){if(!h.ALLOWED_POST_MESSAGE_METHODS[t])throw new Error("Strategy disallowed: "+t);return x[t](n,o,e)}).then(function(){return i.push(t+": success"),!0},function(n){return i.push(t+": "+Object(c.stringifyError)(n)+"\n"),!1})}).then(function(n){var e=n.some(Boolean),r=t.type+" "+t.name+" "+(e?"success":"error")+":\n  - "+i.join("\n  - ")+"\n";if(!e)throw new Error(r)})})}p.responseListeners=p.responseListeners||{},p.requestListeners=p.requestListeners||{},p.WINDOW_WILDCARD=p.WINDOW_WILDCARD||new function(){},p.erroredResponseListeners=p.erroredResponseListeners||{};var z,B="__domain_regex__";function q(n){return p.responseListeners[n]}function F(n){delete p.responseListeners[n]}function H(n){return Boolean(p.erroredResponseListeners[n])}function G(n){var e=n.name,t=n.win,r=n.domain;if(t===l&&(t=null),r===l&&(r=null),!e)throw new Error("Name required to get request listener");var o=p.requestListeners[e];if(o)for(var i=0,u=[t,p.WINDOW_WILDCARD],c=null==u?0:u.length;i<c;i++){var s=u[i],f=s&&o.get(s);if(f){if(r&&"string"==typeof r){if(f[r])return f[r];if(f[B])for(var d=0,w=f[B],h=null==w?0:w.length;d<h;d++){var m=w[d],v=m.regex,y=m.listener;if(Object(a.matchDomain)(v,r))return y}}if(f[l])return f[l]}}}var K=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},J=((z={})[s.REQUEST]=function(n,e,t){var r=G({name:t.name,win:n,domain:e});function o(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.fireAndForget||Object(a.isWindowClosed)(n)?u.a.resolve():U(n,e,K({type:r,hash:t.hash,name:t.name},o))}return u.a.all([o(s.ACK),u.a.try(function(){if(!r)throw new Error("No handler found for post message: "+t.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(a.matchDomain)(r.domain,e))throw new Error("Request origin "+e+" does not match domain "+r.domain.toString());var o=t.data;return r.handler({source:n,origin:e,data:o})}).then(function(n){return o(s.RESPONSE,{ack:"success",data:n})},function(n){return o(s.RESPONSE,{ack:"error",error:n})})]).then(c.noop).catch(function(n){if(r&&r.handleError)return r.handleError(n);throw n})},z[s.ACK]=function(n,e,t){if(!H(t.hash)){var r=q(t.hash);if(!r)throw new Error("No handler found for post message ack for message: "+t.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(a.matchDomain)(r.domain,e))throw new Error("Ack origin "+e+" does not match domain "+r.domain.toString());r.ack=!0}},z[s.RESPONSE]=function(n,e,t){if(!H(t.hash)){var r=q(t.hash);if(!r)throw new Error("No handler found for post message response for message: "+t.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(a.matchDomain)(r.domain,e))throw new Error("Response origin "+e+" does not match domain "+Object(a.stringifyDomainPattern)(r.domain));if(F(t.hash),"error"===t.ack)return r.respond(t.error,null);if("success"===t.ack){var o=t.data;return r.respond(null,{source:n,origin:e,data:o})}}},z),Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function X(n){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!n.source)return}catch(n){return}var e=n.source,t=n.origin,r=function(n,e,t){var r=void 0;try{r=C(e,t,n)}catch(n){return}if(r&&"object"===(void 0===r?"undefined":Q(r))&&null!==r&&(r=r[d.POSTROBOT])&&"object"===(void 0===r?"undefined":Q(r))&&null!==r&&r.type&&"string"==typeof r.type&&J[r.type])return r}(n.data,e,t);r&&(O(e),-1===p.receivedMessages.indexOf(r.id)&&(p.receivedMessages.push(r.id),Object(a.isWindowClosed)(e)&&!r.fireAndForget||J[r.type](e,t,r)))}function Y(n){try{Object(c.noop)(n.source)}catch(n){return}X({source:n.source||n.sourceElement,origin:n.origin||n.originalEvent&&n.originalEvent.origin,data:n.data})}function Z(n){return u.a.try(function(){if(!n.name)throw new Error("Expected options.name");var e=n.name,t=void 0,r=void 0;if("string"==typeof n.window){var o=document.getElementById(n.window);if(!o)throw new Error("Expected options.window "+Object.prototype.toString.call(n.window)+" to be a valid element id");if("iframe"!==o.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(n.window)+" to be an iframe");if(!o.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");t=o.contentWindow}else if(n.window instanceof HTMLIFrameElement){if("iframe"!==n.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(n.window)+" to be an iframe");if(n.window&&!n.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n.window&&n.window.contentWindow&&(t=n.window.contentWindow)}else t=n.window;if(!t)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var i=t;r=n.domain||l;var f=n.name+"_"+Object(c.uniqueID)();if(Object(a.isWindowClosed)(i))throw new Error("Target window is closed");var d=!1,w=p.requestPromises.get(i);w||(w=[],p.requestPromises.set(i,w));var v=u.a.try(function(){if(Object(a.isAncestor)(window,i))return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",r=m(n);return-1!==e&&(r=r.timeout(e,new Error(t+" did not load after "+e+"ms"))),r}(i,n.timeout||h.CHILD_WINDOW_TIMEOUT)}).then(function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).domain;if(Object(c.isRegex)(r)&&!n)return y(i)}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).domain;if(Object(c.isRegex)(r)){if(!Object(a.matchDomain)(r,t))throw new Error("Remote window domain "+t+" does not match regex: "+r.toString());r=t}if("string"!=typeof r&&!Array.isArray(r))throw new TypeError("Expected domain to be a string or array");var o=r;return new u.a(function(t,r){var u=void 0;if(n.fireAndForget||function(n,e){p.responseListeners[n]=e}(f,u={name:e,window:i,domain:o,respond:function(n,e){n||(d=!0,w.splice(w.indexOf(v,1))),n?r(n):t(e)}}),U(i,o,{type:s.REQUEST,hash:f,name:e,data:n.data,fireAndForget:Boolean(n.fireAndForget)}).catch(r),n.fireAndForget)return t();var c=function(n){return-1!==window.knownWindows.indexOf(n)}(i)?h.ACK_TIMEOUT_KNOWN:h.ACK_TIMEOUT,l=n.timeout||h.RES_TIMEOUT,m=c,y=l,g=100;setTimeout(function n(){if(!d){if(Object(a.isWindowClosed)(i))return u.ack?r(new Error("Window closed for "+e+" before response")):r(new Error("Window closed for "+e+" before ack"));if(m=Math.max(m-g,0),-1!==y&&(y=Math.max(y-g,0)),u.ack){if(-1===y)return;g=Math.min(y,2e3)}else{if(0===m)return r(new Error("No ack for postMessage "+e+" in "+Object(a.getDomain)()+" in "+c+"ms"));if(0===y)return r(new Error("No response for postMessage "+e+" in "+Object(a.getDomain)()+" in "+l+"ms"))}setTimeout(n,g)}},g)})});return v.catch(function(){!function(n){p.erroredResponseListeners[n]=!0}(f),F(f)}),w.push(v),v})}function V(n,e,t,r){return(r=r||{}).window=n,r.name=e,r.data=t,Z(r)}function $(n,e,t){var r=Object(a.getAncestor)();return r?V(r,n,e,t):new u.a(function(n,e){return e(new Error("Window does not have a parent"))})}function nn(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!n.window)throw new Error("Expected options.window");var e=n.window;return{send:function(t,r){return V(e,t,r,n)}}}p.receivedMessages=p.receivedMessages||[],p.receiveMessage=X,p.requestPromises=p.requestPromises||new i.a,p.send=V;var en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function tn(n){if(!n.name)throw new Error("Expected options.name");if(!n.handler)throw new Error("Expected options.handler");var e=n.name,t=n.window,r=n.domain,o={handler:n.handler,handleError:n.errorHandler||function(n){throw n},window:t,domain:r||l,name:e},u=function n(e,t){var r=e.name,o=e.win,a=e.domain;if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var u=[],s=0,f=o,d=null==f?0:f.length;s<d;s++){var w=f[s];u.push(n({name:r,domain:a,win:w},t))}return{cancel:function(){for(var n=0,e=null==u?0:u.length;n<e;n++)u[n].cancel()}}}if(Array.isArray(a)){for(var h=[],m=0,v=a,y=null==v?0:v.length;m<y;m++){var g=v[m];h.push(n({name:r,win:o,domain:g},t))}return{cancel:function(){for(var n=0,e=null==h?0:h.length;n<e;n++)h[n].cancel()}}}var O=G({name:r,win:o,domain:a});if(o&&o!==l||(o=p.WINDOW_WILDCARD),a=a||l,O)throw o&&a?new Error("Request listener already exists for "+r+" on domain "+a.toString()+" for "+(o===p.WINDOW_WILDCARD?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===p.WINDOW_WILDCARD?"wildcard":"specified")+" window"):a?new Error("Request listener already exists for "+r+" on domain "+a.toString()):new Error("Request listener already exists for "+r);var E=p.requestListeners,_=E[r];_||(_=new i.a,E[r]=_);var b=_.get(o);b||(b={},_.set(o,b));var S=a.toString(),W=b[B],j=void 0;return Object(c.isRegex)(a)?(W||(W=[],b[B]=W),j={regex:a,listener:t},W.push(j)):b[S]=t,{cancel:function(){b&&(delete b[S],o&&0===Object.keys(b).length&&_.delete(o),j&&W.splice(W.indexOf(j,1)))}}}({name:e,win:t,domain:r},o);if(n.once){var s=o.handler;o.handler=Object(c.once)(function(){return u.cancel(),s.apply(this,arguments)})}if(o.window&&n.errorOnClose)var f=Object(c.safeInterval)(function(){t&&"object"===(void 0===t?"undefined":en(t))&&Object(a.isWindowClosed)(t)&&(f.cancel(),o.handleError(new Error("Post message target window is closed")))},50);return{cancel:function(){u.cancel()}}}function rn(n,e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).name=n,e.handler=t||e.handler,tn(e)}function on(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments[2];"function"==typeof e&&(t=e,e={}),e=e||{},t=t||e.handler;var r=e.errorHandler,o=new u.a(function(o,i){(e=e||{}).name=n,e.once=!0,e.handler=function(n){if(o(n),t)return t(n)},e.errorHandler=function(n){if(i(n),r)return r(n)}}),i=tn(e);return o.cancel=i.cancel,o}function an(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(e,t){return rn(e,n,t)}}}function un(){delete window[d.POSTROBOT],window.removeEventListener("message",Y)}p.on=rn;var cn=Object(a.getAncestor)();function sn(n){var e=p.requestPromises.get(n);if(e)for(var t=0,r=null==e?0:e.length;t<r;t++)e[t].reject(new Error("No response from window - cleaned up"));p.popupWindowsByWin&&p.popupWindowsByWin.delete(n),p.remoteWindows&&p.remoteWindows.delete(n),p.requestPromises.delete(n),p.methods.delete(n),p.readyPromises.delete(n)}var fn=null;p.initialized||(p.initialized=!0,Object(c.addEventListener)(window,"message",Y),fn&&fn.openTunnelToOpener(),function(){v();for(var n=0,e=Object(a.getAllWindows)(),t=null==e?0:e.length;n<t;n++){var r=e[n];r!==window&&y(r).catch(c.noop)}}()),t.d(e,"markWindowKnown",function(){return O}),t.d(e,"serializeMessage",function(){return k}),t.d(e,"deserializeMessage",function(){return C}),t.d(e,"cleanUpWindow",function(){return sn}),t.d(e,"Promise",function(){return u.a}),t.d(e,"bridge",function(){return fn}),t.d(e,"parent",function(){return cn}),t.d(e,"send",function(){return V}),t.d(e,"request",function(){return Z}),t.d(e,"sendToParent",function(){return $}),t.d(e,"client",function(){return nn}),t.d(e,"on",function(){return rn}),t.d(e,"listen",function(){return tn}),t.d(e,"once",function(){return on}),t.d(e,"listener",function(){return an}),t.d(e,"CONFIG",function(){return h}),t.d(e,"disable",function(){return un}),e.default=r},function(n,e,t){"use strict";function r(n){return"[object RegExp]"===Object.prototype.toString.call(n)}var o=t(5);e.a=f,e.d=d,e.f=l,e.b=function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=function(n){var e=m(n);if(!e)throw new Error("Can not determine top window");return[].concat(p(e),[e])}(e),r=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return c(m(n)||n)}(e);return r?[].concat(n(r),t):t},e.i=O,e.j=function(n){if(function(){for(var n=0;n<g.length;n++)v(g[n])&&(g.splice(n,1),y.splice(n,1));for(var e=0;e<y.length;e++)O(y[e])&&(g.splice(e,1),y.splice(e,1))}(),n&&n.contentWindow)try{y.push(n.contentWindow),g.push(n)}catch(n){}},e.e=function(n){return(n=n||window).navigator.mockUserAgent||n.navigator.userAgent},e.c=E,e.g=function(n,e){var t=E(e);if(t)return t===n;if(e===n)return!1;if(m(e)===e)return!1;for(var r=0,o=h(n),i=null==o?0:o.length;r<i;r++)if(o[r]===e)return!0;return!1},e.k=function n(e,t){if("string"==typeof e){if("string"==typeof t)return e===o.b||t===e;if(r(t))return!1;if(Array.isArray(t))return!1}return r(e)?r(t)?e.toString()===t.toString():!Array.isArray(t)&&Boolean(t.match(e)):!!Array.isArray(e)&&(Array.isArray(t)?JSON.stringify(e)===JSON.stringify(t):!r(t)&&e.some(function(e){return n(e,t)}))},e.l=function(n){return Array.isArray(n)?"("+n.join(" | ")+")":r(n)?"RegExp("+n.toString():n.toString()},e.h=function(n){try{if(n===window)return!0}catch(n){if(n&&n.message===i)return!0}try{if("[object Window]"===Object.prototype.toString.call(n))return!0}catch(n){if(n&&n.message===i)return!0}try{if(window.Window&&n instanceof window.Window)return!0}catch(n){if(n&&n.message===i)return!0}try{if(n&&n.self===n)return!0}catch(n){if(n&&n.message===i)return!0}try{if(n&&n.parent===n)return!0}catch(n){if(n&&n.message===i)return!0}try{if(n&&n.top===n)return!0}catch(n){if(n&&n.message===i)return!0}try{n&&n.__cross_domain_utils_window_check__}catch(n){return!0}return!1};var i="Call was rejected by callee.\r\n";function a(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.a.ABOUT}function u(n){if(n)try{if(n.parent&&n.parent!==n)return n.parent}catch(n){}}function c(n){if(n&&!u(n))try{return n.opener}catch(n){}}function s(n){try{return n&&n.location&&n.location.href,!0}catch(n){}return!1}function f(n){var e=(n=n||window).location;if(!e)throw new Error("Can not read window location");var t=e.protocol;if(!t)throw new Error("Can not read window protocol");if(t===o.a.FILE)return o.a.FILE+"//";if(t===o.a.ABOUT){var r=u(n);return r&&s(r)?f(r):o.a.ABOUT+"//"}var i=e.host;if(!i)throw new Error("Can not read window host");return t+"//"+i}function d(n){var e=f(n=n||window);return e&&n.mockDomain&&0===n.mockDomain.indexOf(o.a.MOCK)?n.mockDomain:e}function l(n){try{if(n===window)return!0}catch(n){}try{var e=Object.getOwnPropertyDescriptor(n,"location");if(e&&!1===e.enumerable)return!1}catch(n){}try{if(a(n)&&s(n))return!0}catch(n){}try{if(f(n)===f(window))return!0}catch(n){}return!1}function w(n,e){if(!n||!e)return!1;var t=u(e);return t?t===n:-1!==function(n){var e=[];try{for(;n.parent!==n;)e.push(n.parent),n=n.parent}catch(n){}return e}(e).indexOf(n)}function h(n){var e=[],t=void 0;try{t=n.frames}catch(e){t=n}var r=void 0;try{r=t.length}catch(n){}if(0===r)return e;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=t[o]}catch(n){continue}e.push(i)}return e}for(var a=0;a<100;a++){var u=void 0;try{u=t[a]}catch(n){return e}if(!u)return e;e.push(u)}return e}function p(n){for(var e=[],t=0,r=h(n),o=null==r?0:r.length;t<o;t++){var i=r[t];e.push(i);for(var a=0,u=p(i),c=null==u?0:u.length;a<c;a++){var s=u[a];e.push(s)}}return e}function m(n){if(n){try{if(n.top)return n.top}catch(n){}if(u(n)===n)return n;try{if(w(window,n)&&window.top)return window.top}catch(n){}try{if(w(n,window)&&window.top)return window.top}catch(n){}for(var e=0,t=p(n),r=null==t?0:t.length;e<r;e++){var o=t[e];try{if(o.top)return o.top}catch(n){}if(u(o)===o)return o}}}function v(n){if(!n.contentWindow)return!0;if(!n.parentNode)return!0;var e=n.ownerDocument;return!(!e||!e.documentElement||e.documentElement.contains(n))}var y=[],g=[];function O(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(n===window)return!1}catch(n){return!0}try{if(!n)return!0}catch(n){return!0}try{if(n.closed)return!0}catch(n){return!n||n.message!==i}if(e&&function(n){if(!l(n))return!1;try{if(n===window)return!0;if(a(n)&&s(n))return!0;if(d(window)===d(n))return!0}catch(n){}return!1}(n))try{if(n.mockclosed)return!0}catch(n){}try{if(!n.parent||!n.top)return!0}catch(n){}var t=function(n,e){for(var t=0;t<n.length;t++)try{if(n[t]===e)return t}catch(n){}return-1}(y,n);if(-1!==t){var r=g[t];if(r&&v(r))return!0}return!1}function E(n){return c(n=n||window)||u(n)||void 0}},function(n,e){},function(n,e,t){"use strict";t(4),t(8)},function(n,e,t){"use strict";t(4)},function(n,e,t){"use strict";t(1),t(0)},function(n,e){},function(n,e,t){"use strict";t(4)},function(n,e,t){"use strict"}])});
//# sourceMappingURL=post-robot.min.js.map