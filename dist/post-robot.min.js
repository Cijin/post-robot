!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("postRobot",[],t):"object"==typeof exports?exports.postRobot=t():n.postRobot=t()}("undefined"!=typeof self?self:this,function(){return function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:r})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=9)}([function(n,t,e){"use strict";var r=e(10);e.d(t,"getActualDomain",function(){return r.a}),e.d(t,"getAncestor",function(){return r.b}),e.d(t,"getDomain",function(){return r.c}),e.d(t,"getOpener",function(){return r.d}),e.d(t,"getUserAgent",function(){return r.e}),e.d(t,"isActuallySameDomain",function(){return r.f}),e.d(t,"isAncestor",function(){return r.g}),e.d(t,"isSameDomain",function(){return r.h}),e.d(t,"isWindow",function(){return r.i}),e.d(t,"isWindowClosed",function(){return r.j}),e.d(t,"linkFrameWindow",function(){return r.k}),e.d(t,"matchDomain",function(){return r.l}),e.d(t,"stringifyDomainPattern",function(){return r.m});var o=e(11);e.n(o),e.o(o,"WINDOW_TYPE")&&e.d(t,"WINDOW_TYPE",function(){return o.WINDOW_TYPE});var i=e(5);e.d(t,"WINDOW_TYPE",function(){return i.c})},function(n,t,e){"use strict";function r(n){try{if(!n)return!1;if("undefined"!=typeof Promise&&n instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&n instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&n instanceof window.constructor)return!1;var t={}.toString;if(t){var e=t.call(n);if("[object Window]"===e||"[object global]"===e||"[object DOMWindow]"===e)return!1}if("function"==typeof n.then)return!0}catch(n){return!1}return!1}function o(){var n=void 0;if("undefined"!=typeof window)n=window;else{if("undefined"==typeof window)throw new TypeError("Can not find global");n=window}var t=n.__zalgopromise__=n.__zalgopromise__||{};return t.flushPromises=t.flushPromises||[],t.activeCount=t.activeCount||0,t.possiblyUnhandledPromiseHandlers=t.possiblyUnhandledPromiseHandlers||[],t.dispatchedErrors=t.dispatchedErrors||[],t}var i=function(){function n(t){var e=this;if(function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var r=void 0,o=void 0,i=!1,a=!1,u=!1;try{t(function(n){u?e.resolve(n):(i=!0,r=n)},function(n){u?e.reject(n):(a=!0,o=n)})}catch(n){return void this.reject(n)}u=!0,i?this.resolve(r):a&&this.reject(o)}}return n.prototype.resolve=function(n){if(this.resolved||this.rejected)return this;if(r(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},n.prototype.reject=function(n){var t=this;if(this.resolved||this.rejected)return this;if(r(n))throw new Error("Can not reject promise with another promise");if(!n){var e=n&&"function"==typeof n.toString?n.toString():Object.prototype.toString.call(n);n=new Error("Expected reject to be called with Error, got "+e)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){t.errorHandled||function(n,t){if(-1===o().dispatchedErrors.indexOf(n)){o().dispatchedErrors.push(n),setTimeout(function(){throw n},1);for(var e=0;e<o().possiblyUnhandledPromiseHandlers.length;e++)o().possiblyUnhandledPromiseHandlers[e](n,t)}}(n,t)},1),this.dispatch(),this},n.prototype.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},n.prototype.dispatch=function(){var t=this,e=this.dispatching,i=this.resolved,a=this.rejected,u=this.handlers;if(!e&&(i||a)){this.dispatching=!0,o().activeCount+=1;for(var c=function(e){var o=u[e],c=o.onSuccess,s=o.onError,f=o.promise,d=void 0;if(i)try{d=c?c(t.value):t.value}catch(n){return f.reject(n),"continue"}else if(a){if(!s)return f.reject(t.error),"continue";try{d=s(t.error)}catch(n){return f.reject(n),"continue"}}d instanceof n&&(d.resolved||d.rejected)?(d.resolved?f.resolve(d.value):f.reject(d.error),d.errorHandled=!0):r(d)?d instanceof n&&(d.resolved||d.rejected)?d.resolved?f.resolve(d.value):f.reject(d.error):d.then(function(n){f.resolve(n)},function(n){f.reject(n)}):f.resolve(d)},s=0;s<u.length;s++)c(s);u.length=0,this.dispatching=!1,o().activeCount-=1,0===o().activeCount&&n.flushQueue()}},n.prototype.then=function(t,e){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for success handler");if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for error handler");var r=new n;return this.handlers.push({promise:r,onSuccess:t,onError:e}),this.errorHandled=!0,this.dispatch(),r},n.prototype.catch=function(n){return this.then(void 0,n)},n.prototype.finally=function(t){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.finally expected a function");return this.then(function(e){return n.try(t).then(function(){return e})},function(e){return n.try(t).then(function(){throw e})})},n.prototype.timeout=function(n,t){var e=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){e.resolved||e.rejected||e.reject(t||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(n){return clearTimeout(r),n})},n.prototype.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},n.resolve=function(t){return t instanceof n?t:r(t)?new n(function(n,e){return t.then(n,e)}):(new n).resolve(t)},n.reject=function(t){return(new n).reject(t)},n.asyncReject=function(t){return(new n).asyncReject(t)},n.all=function(t){var e=new n,o=t.length,i=[];if(!o)return e.resolve(i),e;for(var a=function(a){var u=t[a];if(u instanceof n){if(u.resolved)return i[a]=u.value,o-=1,"continue"}else if(!r(u))return i[a]=u,o-=1,"continue";n.resolve(u).then(function(n){i[a]=n,0==(o-=1)&&e.resolve(i)},function(n){e.reject(n)})},u=0;u<t.length;u++)a(u);return 0===o&&e.resolve(i),e},n.hash=function(t){var e={};return n.all(Object.keys(t).map(function(r){return n.resolve(t[r]).then(function(n){e[r]=n})})).then(function(){return e})},n.map=function(t,e){return n.all(t.map(e))},n.onPossiblyUnhandledException=function(n){return function(n){return o().possiblyUnhandledPromiseHandlers.push(n),{cancel:function(){o().possiblyUnhandledPromiseHandlers.splice(o().possiblyUnhandledPromiseHandlers.indexOf(n),1)}}}(n)},n.try=function(t,e,r){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.try expected a function");var o=void 0;try{o=t.apply(e,r||[])}catch(t){return n.reject(t)}return n.resolve(o)},n.delay=function(t){return new n(function(n){setTimeout(n,t)})},n.isPromise=function(t){return!!(t&&t instanceof n)||r(t)},n.flush=function(){var t=new n;return o().flushPromises.push(t),0===o().activeCount&&n.flushQueue(),t},n.flushQueue=function(){var n=o().flushPromises;o().flushPromises=[];for(var t=0,e=null==n?0:n.length;t<e;t++)n[t].resolve()},n}();e.d(t,"a",function(){return i})},function(n,t,e){"use strict";e(6);var r=e(7);e.d(t,"addEventListener",function(){return r.a}),e(12),e(13),e(8);var o=e(3);e.d(t,"getOrSet",function(){return o.d}),e.d(t,"isRegex",function(){return o.f}),e.d(t,"memoizePromise",function(){return o.h}),e.d(t,"noop",function(){return o.i}),e.d(t,"once",function(){return o.j}),e.d(t,"safeInterval",function(){return o.m}),e.d(t,"stringifyError",function(){return o.o}),e.d(t,"uniqueID",function(){return o.q}),e.d(t,"weakMapMemoizePromise",function(){return o.r}),e(14);var i=e(15);e.n(i),e(16),e(17),e(18)},function(n,t,e){"use strict";t.q=a,t.c=function(){if("undefined"!=typeof window)return window;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("No global found")},t.g=function(n){var t=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new o.a;function i(){for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=r.getOrSet(e.thisNamespace?this:n,function(){return{}}),u=c(o),s=e.time;if(a[u]&&s&&Date.now()-a[u].time<s&&delete a[u],a[u])return a[u].value;var f=Date.now(),d=n.apply(this,arguments);return a[u]={time:f,value:d},a[u].value}return i.reset=function(){r.delete(e.thisNamespace?t:n)},e.name&&(i.displayName=e.name+":memoized"),i},t.h=function(n){var t={};function e(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=c(r);return t.hasOwnProperty(i)?t[i]:(t[i]=n.apply(this,arguments).finally(function(){delete t[i]}),t[i])}return e.reset=function(){t={}},e},t.k=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function e(){return r.a.try(n,this,arguments)}return t.name&&(e.displayName=t.name+":promisified"),e},t.e=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=n.__inline_memoize_cache__=n.__inline_memoize_cache__||{},o=c(e);return r.hasOwnProperty(o)?r[o]:r[o]=t.apply(void 0,e)},t.i=function(){},t.j=function(n){var t=!1;return function(){if(!t)return t=!0,n.apply(this,arguments)}},t.o=function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e>=3)return"stringifyError stack overflow";try{if(!t)return"<unknown error: "+Object.prototype.toString.call(t)+">";if("string"==typeof t)return t;if(t instanceof Error){var r=t&&t.stack,o=t&&t.message;if(r&&o)return-1!==r.indexOf(o)?r:o+"\n"+r;if(r)return r;if(o)return o}return"function"==typeof t.toString?t.toString():Object.prototype.toString.call(t)}catch(t){return"Error while stringifying error: "+n(t,e+1)}},t.n=function(n){return"string"==typeof n?n:n&&"function"==typeof n.toString?n.toString():Object.prototype.toString.call(n)},t.b=function(n,t){if(!t)return n;if(Object.assign)return Object.assign(n,t);for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},t.m=function(n,t){var e=void 0;return function r(){e=setTimeout(function(){n(),r()},t)}(),{cancel:function(){clearTimeout(e)}}},t.a=function(n){return n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()},t.f=function(n){return"[object RegExp]"===Object.prototype.toString.call(n)},e.d(t,"r",function(){return s}),t.d=function(n,t,e){if(n.hasOwnProperty(t))return n[t];var r=e();return n[t]=r,r},t.p=function(n){var t=void 0,e=void 0;try{t=n()}catch(n){e=n}return{result:t,error:e}},t.l=function(n,t){var e=n.indexOf(t);-1!==e&&n.splice(e,1)};var r=e(1),o=e(4),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function a(){var n="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return n.charAt(Math.floor(Math.random()*n.length))})+"_"+function(n){if("function"==typeof btoa)return btoa(n);if("undefined"!=typeof Buffer)return Buffer.from(n,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var u=void 0;function c(n){try{return JSON.stringify(Array.prototype.slice.call(n),function(n,t){return"function"==typeof t?"memoize["+function(n){if(u=u||new o.a,null===n||void 0===n||"object"!==(void 0===n?"undefined":i(n))&&"function"!=typeof n)throw new Error("Invalid object");var t=u.get(n);return t||(t=(void 0===n?"undefined":i(n))+":"+a(),u.set(n,t)),t}(t)+"]":t})}catch(n){throw new Error("Arguments not serializable -- can not be used to memoize")}}var s=function(n){var t=new o.a;return function(e){var r=this;return t.getOrSet(e,function(){return n.call(r,e).finally(function(){t.delete(e)})})}}},function(n,t,e){"use strict";e.d({},"WeakMap",function(){return u});var r=e(0);function o(n,t){for(var e=0;e<n.length;e++)try{if(n[e]===t)return e}catch(n){}return-1}var i=Object.defineProperty,a=Date.now()%1e9,u=function(){function n(){if(function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),a+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+a,function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var n=new WeakMap,t={};return Object.freeze(t),n.set(t,"__testvalue__"),"__testvalue__"===n.get(t)}catch(n){return!1}}())try{this.weakmap=new WeakMap}catch(n){}this.keys=[],this.values=[]}return n.prototype._cleanupClosedWindows=function(){for(var n=this.weakmap,t=this.keys,e=0;e<t.length;e++){var o=t[e];if(Object(r.isWindow)(o)&&Object(r.isWindowClosed)(o)){if(n)try{n.delete(o)}catch(n){}t.splice(e,1),this.values.splice(e,1),e-=1}}},n.prototype.isSafeToReadWrite=function(n){if(Object(r.isWindow)(n))return!1;try{n&&n.self,n&&n[this.name]}catch(n){return!1}return!0},n.prototype.set=function(n,t){if(!n)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.set(n,t)}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var r=this.name,a=n[r];a&&a[0]===n?a[1]=t:i(n,r,{value:[n,t],writable:!0})}else{this._cleanupClosedWindows();var u=this.keys,c=this.values,s=o(u,n);-1===s?(u.push(n),c.push(t)):c[s]=t}},n.prototype.get=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(n))return t.get(n)}catch(n){delete this.weakmap}if(!this.isSafeToReadWrite(n)){this._cleanupClosedWindows();var e=o(this.keys,n);if(-1===e)return;return this.values[e]}var r=n[this.name];if(r&&r[0]===n)return r[1]},n.prototype.delete=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(n)}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var e=n[this.name];e&&e[0]===n&&(e[0]=e[1]=void 0)}else{this._cleanupClosedWindows();var r=this.keys,i=o(r,n);-1!==i&&(r.splice(i,1),this.values.splice(i,1))}},n.prototype.has=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(n))return!0}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var e=n[this.name];return!(!e||e[0]!==n)}return this._cleanupClosedWindows(),-1!==o(this.keys,n)},n.prototype.getOrSet=function(n,t){if(this.has(n))return this.get(n);var e=t();return this.set(n,e),e},n}();e.d(t,"a",function(){return u})},function(n,t,e){"use strict";e.d(t,"a",function(){return r}),e.d(t,"b",function(){return o}),e.d(t,"c",function(){return i});var r={MOCK:"mock:",FILE:"file:",ABOUT:"about:"},o="*",i={IFRAME:"iframe",POPUP:"popup"}},function(n,t,e){"use strict";t.a=function(){return!!(window.navigator.mockUserAgent||window.navigator.userAgent).match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)}},function(n,t,e){"use strict";e(1),e(0),e(4);var r=e(3);e(6),t.b=function n(){return Object(r.e)(n,function(){try{if("undefined"==typeof window)return!1;if(window.localStorage){var n=Math.random().toString();window.localStorage.setItem("__test__localStorage__",n);var t=window.localStorage.getItem("__test__localStorage__");if(window.localStorage.removeItem("__test__localStorage__"),n===t)return!0}}catch(n){}return!1})},t.a=function(n,t,e){return n.addEventListener(t,e),{cancel:function(){n.removeEventListener(t,e)}}},"function"==typeof Symbol&&Symbol.iterator,Object.assign,Object.create(Error.prototype)},function(n,t,e){"use strict";t.a=function n(t){var e=t.name,i=t.version,a=void 0===i?"latest":i,u=t.lifetime,c=void 0===u?3e5:u;return Object(r.e)(n,function(){var n="__"+e+"_"+a+"_storage__",t=void 0;function i(e){var i=Object(o.b)(),a=void 0;if(t&&(a=t),!a&&i){var u=window.localStorage.getItem(n);u&&(a=JSON.parse(u))}a||(a=Object(r.c)()[n]),a||(a={id:Object(r.q)()}),a.id||(a.id=Object(r.q)()),t=a;var c=e(a);return i?window.localStorage.setItem(n,JSON.stringify(a)):Object(r.c)()[n]=a,t=null,c}function u(n){return i(function(t){var e=t.__session__,o=Date.now();return e&&o-e.created>c&&(e=null),e||(e={guid:Object(r.q)(),created:o}),t.__session__=e,n(e)})}return{getState:i,getID:function(){return i(function(n){return n.id})},getSessionState:function(n){return u(function(t){return t.state=t.state||{},n(t.state)})},getSessionID:function(){return u(function(n){return n.guid})}}},[{name:e,version:a,lifetime:c}])};var r=e(3),o=e(7)},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};e.d(r,"markWindowKnown",function(){return j}),e.d(r,"serializeMessage",function(){return Y}),e.d(r,"deserializeMessage",function(){return Q}),e.d(r,"ProxyWindow",function(){return F}),e.d(r,"cleanUpWindow",function(){return Dn}),e.d(r,"Promise",function(){return a.a}),e.d(r,"bridge",function(){return In}),e.d(r,"parent",function(){return jn}),e.d(r,"send",function(){return vn}),e.d(r,"requestPromises",function(){return pn}),e.d(r,"request",function(){return mn}),e.d(r,"sendToParent",function(){return yn}),e.d(r,"client",function(){return gn}),e.d(r,"on",function(){return bn}),e.d(r,"listen",function(){return En}),e.d(r,"once",function(){return _n}),e.d(r,"listener",function(){return Wn}),e.d(r,"CONFIG",function(){return w}),e.d(r,"disable",function(){return Sn});var o,i=e(0),a=e(1),u=e(2),c={REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},s={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},f={POSTROBOT:"__postRobot__"},d="*",l={CROSS_DOMAIN_ZALGO_PROMISE:"cross_domain_zalgo_promise",CROSS_DOMAIN_FUNCTION:"cross_domain_function",CROSS_DOMAIN_WINDOW:"cross_domain_window"},w={BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:2e3,ACK_TIMEOUT_KNOWN:1e4,RES_TIMEOUT:-1,ALLOWED_POST_MESSAGE_METHODS:(o={},o.postrobot_post_message=!0,o.postrobot_bridge=!0,o.postrobot_global=!0,o)},h=e(4),p=window[f.POSTROBOT]=window[f.POSTROBOT]||{},m=p.windowStore=p.windowStore||new h.a,v=function(){return{}};function y(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;function e(n){return m.getOrSet(n,t)}return{has:function(t){return e(t).hasOwnProperty(n)},get:function(t,r){var o=e(t);return o.hasOwnProperty(n)?o[n]:r},set:function(t,r){return e(t)[n]=r,r},del:function(t){delete e(t)[n]},getOrSet:function(t,r){var o=e(t);if(o.hasOwnProperty(n))return o[n];var i=r();return o[n]=i,i}}}function g(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,e=Object(u.getOrSet)(p,n,t);return{has:function(n){return e.hasOwnProperty(n)},get:function(n,t){return e.hasOwnProperty(n)?e[n]:t},set:function(n,t){return e[n]=t,t},del:function(n){delete e[n]},getOrSet:function(n,t){if(e.hasOwnProperty(n))return e[n];var r=t();return e[n]=r,r},reset:function(){e=t()},keys:function(){return Object.keys(e)}}}p.instanceID=p.instanceID||Object(u.uniqueID)();var O=y("helloPromises");function E(n){return O.getOrSet(n,function(){return new a.a})}var b=Object(u.once)(function(){p.on(s.HELLO,{domain:d},function(n){var t=n.source,e=n.origin;return E(t).resolve({win:t,domain:e}),{instanceID:p.instanceID}})});function _(n){return p.send(n,s.HELLO,{instanceID:p.instanceID},{domain:d,timeout:-1}).then(function(t){var e=t.origin,r=t.data.instanceID;return E(n).resolve({win:n,domain:e}),{win:n,domain:e,instanceID:r}})}var W=Object(u.weakMapMemoizePromise)(function(n){return _(n).then(function(n){return n.instanceID})}),S=y("knownWindows");function j(n){S.set(n,!0)}var D,I={FUNCTION:"function",ERROR:"error",PROMISE:"promise",REGEX:"regex",DATE:"date",ARRAY:"array",OBJECT:"object",STRING:"string",NUMBER:"number",BOOLEAN:"boolean",NULL:"null",UNDEFINED:"undefined"},P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function A(n){return"object"===(void 0===n?"undefined":P(n))&&null!==n&&"string"==typeof n.__type__}function T(n){return void 0===n?I.UNDEFINED:null===n?I.NULL:Array.isArray(n)?I.ARRAY:"function"==typeof n?I.FUNCTION:"object"===(void 0===n?"undefined":P(n))?n instanceof Error?I.ERROR:"function"==typeof n.then?I.PROMISE:"[object RegExp]"===Object.prototype.toString.call(n)?I.REGEX:"[object Date]"===Object.prototype.toString.call(n)?I.DATE:I.OBJECT:"string"==typeof n?I.STRING:"number"==typeof n?I.NUMBER:"boolean"==typeof n?I.BOOLEAN:void 0}function N(n,t){return{__type__:n,__val__:t}}var R,C=((D={})[I.FUNCTION]=function(){},D[I.ERROR]=function(n){var t=n.message,e=n.stack,r=n.code;return N(I.ERROR,{message:t,stack:e,code:r})},D[I.PROMISE]=function(){},D[I.REGEX]=function(n){return N(I.REGEX,n.source)},D[I.DATE]=function(n){return N(I.DATE,n.toJSON())},D[I.ARRAY]=function(n){return n},D[I.OBJECT]=function(n){return n},D[I.STRING]=function(n){return n},D[I.NUMBER]=function(n){return n},D[I.BOOLEAN]=function(n){return n},D[I.NULL]=function(n){return n},D),x={},M=((R={})[I.FUNCTION]=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},R[I.ERROR]=function(n){var t=n.message,e=n.stack,r=n.code,o=new Error(t);return o.code=r,o.stack=e+"\n\n"+o.stack,o},R[I.PROMISE]=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},R[I.REGEX]=function(n){return new RegExp(n)},R[I.DATE]=function(n){return new Date(n)},R[I.ARRAY]=function(n){return n},R[I.OBJECT]=function(n){return n},R[I.STRING]=function(n){return n},R[I.NUMBER]=function(n){return n},R[I.BOOLEAN]=function(n){return n},R[I.NULL]=function(n){return n},R),k={},U=y("winToProxyWindow"),L=g("idToProxyWindow");function z(){for(var n=0,t=L.keys(),e=null==t?0:t.length;n<e;n++){var r=t[n];L.get(r).shouldClean()&&L.del(r)}}var F=function(){function n(t,e){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.isProxyWindow=!0,this.serializedWindow=t,this.actualWindowPromise=new a.a,e&&this.setWindow(e),this.serializedWindow.getInstanceID=Object(u.memoizePromise)(this.serializedWindow.getInstanceID)}return n.prototype.getType=function(){return this.serializedWindow.type},n.prototype.isPopup=function(){return this.getType()===i.WINDOW_TYPE.POPUP},n.prototype.isIframe=function(){return this.getType()===i.WINDOW_TYPE.IFRAME},n.prototype.setLocation=function(n){var t=this;return a.a.try(function(){if(!t.actualWindow)return t.serializedWindow.setLocation(n);t.actualWindow.location=n}).then(function(){return t})},n.prototype.setName=function(n){var t=this;return a.a.try(function(){if(!t.actualWindow)return t.serializedWindow.setName(n);if(!Object(i.isSameDomain)(t.actualWindow))throw new Error("Can not set name for window on different domain");t.actualWindow.name=n,t.actualWindow.frameElement&&t.actualWindow.frameElement.setAttribute("name",n)}).then(function(){return t})},n.prototype.close=function(){var n=this;return a.a.try(function(){if(!n.actualWindow)return n.serializedWindow.close();n.actualWindow.close()}).then(function(){return n})},n.prototype.focus=function(){var n=this;return a.a.try(function(){return n.actualWindow&&n.actualWindow.focus(),n.serializedWindow.focus()}).then(function(){return n})},n.prototype.isClosed=function(){var n=this;return a.a.try(function(){return n.actualWindow?Object(i.isWindowClosed)(n.actualWindow):n.serializedWindow.isClosed()})},n.prototype.getWindow=function(){return this.actualWindow},n.prototype.setWindow=function(n){this.actualWindow=n,this.actualWindowPromise.resolve(n)},n.prototype.awaitWindow=function(){return this.actualWindowPromise},n.prototype.matchWindow=function(n){var t=this;return a.a.try(function(){return t.actualWindow?n===t.actualWindow:a.a.all([t.getInstanceID(),W(n)]).then(function(e){var r=e[0]===e[1];return r&&t.setWindow(n),r})})},n.prototype.unwrap=function(){return this.actualWindow||this},n.prototype.getInstanceID=function(){return this.actualWindow?W(this.actualWindow):this.serializedWindow.getInstanceID()},n.prototype.serialize=function(){return this.serializedWindow},n.prototype.shouldClean=function(){return this.actualWindow&&Object(i.isWindowClosed)(this.actualWindow)},n.unwrap=function(t){return n.isProxyWindow(t)?t.unwrap():t},n.serialize=function(t){return z(),n.toProxyWindow(t).serialize()},n.deserialize=function(t){return z(),L.getOrSet(t.id,function(){return new n(t)})},n.isProxyWindow=function(n){return Boolean(n&&!Object(i.isWindow)(n)&&n.isProxyWindow)},n.toProxyWindow=function(t){return z(),n.isProxyWindow(t)?t:U.getOrSet(t,function(){var e=Object(u.uniqueID)();return L.set(e,new n({id:e,type:Object(i.getOpener)(t)?i.WINDOW_TYPE.POPUP:i.WINDOW_TYPE.IFRAME,getInstanceID:function(){return W(t)},close:function(){return a.a.try(function(){t.close()})},focus:function(){return a.a.try(function(){t.focus()})},isClosed:function(){return a.a.try(function(){return Object(i.isWindowClosed)(t)})},setLocation:function(n){return a.a.try(function(){if(Object(i.isSameDomain)(t))try{if(t.location&&"function"==typeof t.location.replace)return void t.location.replace(n)}catch(n){}t.location=n})},setName:function(n){return a.a.try(function(){t.name=n})}},t))})},n}(),B=y("methodStore"),H=g("proxyWindowMethods");function q(n,t,e,r,o){F.isProxyWindow(r)?H.set(n,{val:t,name:e,domain:o,source:r}):(H.del(n),B.getOrSet(r,function(){return{}})[n]={domain:o,name:e,val:t,source:r})}function G(n,t){return B.getOrSet(n,function(){return{}})[t]||H.get(t)}p.listeningForFunctions=p.listeningForFunctions||!1;var J=Object(u.once)(function(){p.listeningForFunctions||(p.listeningForFunctions=!0,p.on(s.METHOD,{origin:d},function(n){var t=n.source,e=n.origin,r=n.data,o=r.id,c=r.name;return a.a.try(function(){var n=G(t,o);if(!n)throw new Error("Could not find method '"+r.name+"' with id: "+r.id+" in "+Object(i.getDomain)(window));var s=n.source,f=n.domain,d=n.val;return a.a.try(function(){if(!Object(i.matchDomain)(f,e))throw new Error("Method '"+r.name+"' domain "+JSON.stringify(Object(u.isRegex)(n.domain)?n.domain.source:n.domain)+" does not match origin "+e+" in "+Object(i.getDomain)(window));if(F.isProxyWindow(s))return s.matchWindow(t).then(function(n){if(!n)throw new Error("Method call '"+r.name+"' failed - proxy window does not match source in "+Object(i.getDomain)(window))})}).then(function(){return d.apply({source:t,origin:e},r.args)},function(n){return a.a.try(function(){if(d.onError)return d.onError(n)}).then(function(){throw n})}).then(function(n){return{result:n,id:o,name:c}})})}))});function K(n,t,e,r){J();var o=e.__id__||Object(u.uniqueID)();n=F.unwrap(n);var i=e.__name__||e.name||r;return F.isProxyWindow(n)?(q(o,e,i,n,t),n.awaitWindow().then(function(n){q(o,e,i,n,t)})):q(o,e,i,n,t),N(l.CROSS_DOMAIN_FUNCTION,{id:o,name:i})}function Y(n,t,e){var r;return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,e=JSON.stringify(n,function(n){var e=this[n];if(A(this))return e;var r=T(e);if(!r)return e;var o=t[r]||C[r];return o?o(e,n):e});return void 0===e?I.UNDEFINED:e}(e,((r={})[I.PROMISE]=function(e,r){return function(n,t,e,r){return N(l.CROSS_DOMAIN_ZALGO_PROMISE,{then:K(n,t,function(n,t){return e.then(n,t)},r)})}(n,t,e,r)},r[I.FUNCTION]=function(e,r){return K(n,t,e,r)},r[I.OBJECT]=function(n){return Object(i.isWindow)(n)||F.isProxyWindow(n)?(t=n,N(l.CROSS_DOMAIN_WINDOW,F.serialize(t))):n;var t},r))}function Q(n,t,e){var r;return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;if(n!==I.UNDEFINED)return JSON.parse(n,function(n,e){if(A(this))return e;var r=void 0,o=void 0;if(A(e)?(r=e.__type__,o=e.__val__):(r=T(e),o=e),!r)return o;var i=t[r]||M[r];return i?i(o,n):o})}(e,((r={})[l.CROSS_DOMAIN_ZALGO_PROMISE]=function(n){return t=n.then,new a.a(t);var t},r[l.CROSS_DOMAIN_FUNCTION]=function(e){return function(n,t,e){var r=e.id,o=e.name,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function a(){var u=arguments;return F.toProxyWindow(n).awaitWindow().then(function(n){var c=G(n,r);return c&&c.val!==a?c.val.apply({source:window,origin:Object(i.getDomain)()},u):p.send(n,s.METHOD,{id:r,name:o,args:Array.prototype.slice.call(u)},{domain:t,fireAndForget:e.fireAndForget}).then(function(n){if(!e.fireAndForget)return n.data.result})}).catch(function(n){throw n})}return a.__name__=o,a.__origin__=t,a.__source__=n,a.__id__=r,a.origin=t,a},u=a();return u.fireAndForget=a({fireAndForget:!0}),u}(n,t,e)},r[l.CROSS_DOMAIN_WINDOW]=function(n){return t=n,F.deserialize(t);var t},r))}var X={postrobot_post_message:function(n,t,e){(Array.isArray(e)?e:"string"==typeof e?[e]:[d]).map(function(t){if(0===t.indexOf("mock:")){if("file:"===window.location.protocol)return d;if(!Object(i.isActuallySameDomain)(n))throw new Error("Attempting to send messsage to mock domain "+t+", but window is actually cross-domain");return Object(i.getActualDomain)(n)}return 0===t.indexOf("file:")?d:t}).forEach(function(e){return n.postMessage(t,e)})}},Z=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n};function V(n,t,e){return a.a.try(function(){var r;if(Object(i.isWindowClosed)(n))throw new Error("Window is closed");var o=Y(n,t,((r={})[f.POSTROBOT]=Z({id:Object(u.uniqueID)()},e),r)),c=[];return a.a.map(Object.keys(X),function(e){return a.a.try(function(){if(!w.ALLOWED_POST_MESSAGE_METHODS[e])throw new Error("Strategy disallowed: "+e);return X[e](n,o,t)}).then(function(){return c.push(e+": success"),!0},function(n){return c.push(e+": "+Object(u.stringifyError)(n)+"\n"),!1})}).then(function(n){var t=n.some(Boolean),r=e.type+" "+e.name+" "+(t?"success":"error")+":\n  - "+c.join("\n  - ")+"\n";if(!t)throw new Error(r)})})}var $=g("responseListeners"),nn=y("requestListeners"),tn=g("erroredResponseListeners");p.WINDOW_WILDCARD=p.WINDOW_WILDCARD||new function(){};var en,rn="__domain_regex__";function on(n){return $.get(n)}function an(n){$.del(n)}function un(n){return tn.has(n)}function cn(n){var t=n.name,e=n.win,r=n.domain;if(e===d&&(e=null),r===d&&(r=null),!t)throw new Error("Name required to get request listener");for(var o=0,a=[e,p.WINDOW_WILDCARD],u=null==a?0:a.length;o<u;o++){var c=a[o];if(c){var s=nn.get(c);if(s){var f=s[t];if(f){if(r&&"string"==typeof r){if(f[r])return f[r];if(f[rn])for(var l=0,w=f[rn],h=null==w?0:w.length;l<h;l++){var m=w[l],v=m.regex,y=m.listener;if(Object(i.matchDomain)(v,r))return y}}if(f[d])return f[d]}}}}}var sn=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},fn=((en={})[c.REQUEST]=function(n,t,e){var r=cn({name:e.name,win:n,domain:t});function o(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.fireAndForget||Object(i.isWindowClosed)(n)?a.a.resolve():V(n,t,sn({type:r,ack:o,hash:e.hash,name:e.name},u))}return e.name===s.METHOD&&e.data&&"string"==typeof e.data.name?e.data.name:e.name,a.a.all([o(c.ACK),a.a.try(function(){if(!r)throw new Error("No handler found for post message: "+e.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(i.matchDomain)(r.domain,t))throw new Error("Request origin "+t+" does not match domain "+r.domain.toString());var o=e.data;return r.handler({source:n,origin:t,data:o})}).then(function(n){return o(c.RESPONSE,"success",{data:n})},function(n){return o(c.RESPONSE,"error",{error:n})})]).then(u.noop).catch(function(n){if(r&&r.handleError)return r.handleError(n);throw n})},en[c.ACK]=function(n,t,e){if(!un(e.hash)){var r=on(e.hash);if(!r)throw new Error("No handler found for post message ack for message: "+e.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(i.matchDomain)(r.domain,t))throw new Error("Ack origin "+t+" does not match domain "+r.domain.toString());r.ack=!0}},en[c.RESPONSE]=function(n,t,e){if(!un(e.hash)){var r=on(e.hash);if(!r)throw new Error("No handler found for post message response for message: "+e.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(i.matchDomain)(r.domain,t))throw new Error("Response origin "+t+" does not match domain "+Object(i.stringifyDomainPattern)(r.domain));if(an(e.hash),"error"===e.ack)return r.respond(e.error,null);if("success"===e.ack){var o=e.data;return r.respond(null,{source:n,origin:t,data:o})}}},en),dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ln=g("receivedMessages");function wn(n){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!n.source)return}catch(n){return}var t=n.source,e=n.origin,r=function(n,t,e){var r=void 0;try{r=Q(t,e,n)}catch(n){return}if(r&&"object"===(void 0===r?"undefined":dn(r))&&null!==r&&(r=r[f.POSTROBOT])&&"object"===(void 0===r?"undefined":dn(r))&&null!==r&&r.type&&"string"==typeof r.type&&fn[r.type])return r}(n.data,t,e);r&&(j(t),ln.has(r.id)||(ln.set(r.id,!0),Object(i.isWindowClosed)(t)&&!r.fireAndForget||fn[r.type](t,e,r)))}function hn(n){try{Object(u.noop)(n.source)}catch(n){return}var t={source:n.source||n.sourceElement,origin:n.origin||n.originalEvent&&n.originalEvent.origin,data:n.data};if(t.source){if(!t.origin)throw new Error("Post message did not have origin domain");wn(t)}}p.receiveMessage=wn;var pn=y("requestPromises");function mn(n){return a.a.try(function(){if(!n.name)throw new Error("Expected options.name");var t=n.name,e=void 0,r=void 0;if("string"==typeof n.window){var o=document.getElementById(n.window);if(!o)throw new Error("Expected options.window "+Object.prototype.toString.call(n.window)+" to be a valid element id");if("iframe"!==o.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(n.window)+" to be an iframe");if(!o.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e=o.contentWindow}else if(n.window instanceof HTMLIFrameElement){if("iframe"!==n.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(n.window)+" to be an iframe");if(n.window&&!n.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n.window&&n.window.contentWindow&&(e=n.window.contentWindow)}else e=n.window;if(!e)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var f=e;r=n.domain||d;var l=n.name+"_"+Object(u.uniqueID)();if(Object(i.isWindowClosed)(f))throw new Error("Target window is closed");var h=!1,p=pn.getOrSet(f,function(){return[]}),m=a.a.try(function(){if(Object(i.isAncestor)(window,f))return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",r=E(n);return-1!==t&&(r=r.timeout(t,new Error(e+" did not load after "+t+"ms"))),r}(f,n.timeout||w.CHILD_WINDOW_TIMEOUT)}).then(function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).domain;if(Object(u.isRegex)(r)&&!n)return _(f)}).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).domain;if(Object(u.isRegex)(r)){if(!Object(i.matchDomain)(r,e))throw new Error("Remote window domain "+e+" does not match regex: "+r.toString());r=e}if("string"!=typeof r&&!Array.isArray(r))throw new TypeError("Expected domain to be a string or array");var o=r;return t===s.METHOD&&n.data&&"string"==typeof n.data.name&&n.data.name,new a.a(function(e,r){var a=void 0;if(n.fireAndForget||function(n,t){$.set(n,t)}(l,a={name:t,window:f,domain:o,respond:function(n,t){n||(h=!0,p.splice(p.indexOf(m,1))),n?r(n):e(t)}}),V(f,o,{type:c.REQUEST,hash:l,name:t,data:n.data,fireAndForget:Boolean(n.fireAndForget)}).catch(r),n.fireAndForget)return e();var u=function(n){return S.get(n,!1)}(f)?w.ACK_TIMEOUT_KNOWN:w.ACK_TIMEOUT,s=n.timeout||w.RES_TIMEOUT,d=u,v=s,y=100;setTimeout(function n(){if(!h){if(Object(i.isWindowClosed)(f))return a.ack?r(new Error("Window closed for "+t+" before response")):r(new Error("Window closed for "+t+" before ack"));if(d=Math.max(d-y,0),-1!==v&&(v=Math.max(v-y,0)),a.ack){if(-1===v)return;y=Math.min(v,2e3)}else{if(0===d)return r(new Error("No ack for postMessage "+t+" in "+Object(i.getDomain)()+" in "+u+"ms"));if(0===v)return r(new Error("No response for postMessage "+t+" in "+Object(i.getDomain)()+" in "+s+"ms"))}setTimeout(n,y)}},y)})});return m.catch(function(){!function(n){tn.set(n,!0)}(l),an(l)}),p.push(m),m})}function vn(n,t,e,r){return(r=r||{}).window=n,r.name=t,r.data=e,mn(r)}function yn(n,t,e){var r=Object(i.getAncestor)();return r?vn(r,n,t,e):new a.a(function(n,t){return t(new Error("Window does not have a parent"))})}function gn(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!n.window)throw new Error("Expected options.window");var t=n.window;return{send:function(e,r){return vn(t,e,r,n)}}}p.send=vn;var On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function En(n){if(!n.name)throw new Error("Expected options.name");if(!n.handler)throw new Error("Expected options.handler");var t=n.name,e=n.window,r=n.domain,o={handler:n.handler,handleError:n.errorHandler||function(n){throw n},window:e,domain:r||d,name:t},a=function n(t,e){var r=t.name,o=t.win,i=t.domain;if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var a=[],c=0,s=o,f=null==s?0:s.length;c<f;c++){var l=s[c];a.push(n({name:r,domain:i,win:l},e))}return{cancel:function(){for(var n=0,t=null==a?0:a.length;n<t;n++)a[n].cancel()}}}if(Array.isArray(i)){for(var w=[],h=0,m=i,v=null==m?0:m.length;h<v;h++){var y=m[h];w.push(n({name:r,win:o,domain:y},e))}return{cancel:function(){for(var n=0,t=null==w?0:w.length;n<t;n++)w[n].cancel()}}}var g=cn({name:r,win:o,domain:i});if(o&&o!==d||(o=p.WINDOW_WILDCARD),i=i||d,g)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===p.WINDOW_WILDCARD?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===p.WINDOW_WILDCARD?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var O=nn.getOrSet(o,function(){return{}}),E=Object(u.getOrSet)(O,r,function(){return{}}),b=i.toString(),_=void 0,W=void 0;return Object(u.isRegex)(i)?(_=Object(u.getOrSet)(E,rn,function(){return[]}),W={regex:i,listener:e},_.push(W)):E[b]=e,{cancel:function(){delete E[b],W&&(_.splice(_.indexOf(W,1)),_.length||delete E[rn]),Object.keys(E).length||delete O[r],o&&!Object.keys(O).length&&nn.del(o)}}}({name:t,win:e,domain:r},o);if(n.once){var c=o.handler;o.handler=Object(u.once)(function(){return a.cancel(),c.apply(this,arguments)})}if(o.window&&n.errorOnClose)var s=Object(u.safeInterval)(function(){e&&"object"===(void 0===e?"undefined":On(e))&&Object(i.isWindowClosed)(e)&&(s.cancel(),o.handleError(new Error("Post message target window is closed")))},50);return{cancel:function(){a.cancel()}}}function bn(n,t,e){return"function"==typeof t&&(e=t,t={}),(t=t||{}).name=n,t.handler=e||t.handler,En(t)}function _n(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments[2];"function"==typeof t&&(e=t,t={}),t=t||{},e=e||t.handler;var r=t.errorHandler,o=new a.a(function(o,i){(t=t||{}).name=n,t.once=!0,t.handler=function(n){if(o(n),e)return e(n)},t.errorHandler=function(n){if(i(n),r)return r(n)}}),i=En(t);return o.cancel=i.cancel,o}function Wn(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(t,e){return bn(t,n,e)}}}function Sn(){delete window[f.POSTROBOT],window.removeEventListener("message",hn)}p.on=bn;var jn=Object(i.getAncestor)();function Dn(n){for(var t=0,e=pn.get(n,[]),r=null==e?0:e.length;t<r;t++)e[t].reject(new Error("Window cleaned up before response")).catch(u.noop)}var In=null;p.initialized||(p.initialized=!0,Object(u.addEventListener)(window,"message",hn),In&&In.openTunnelToOpener(),function(){b();var n=Object(i.getAncestor)();n&&_(n).catch(u.noop)}()),e.d(t,"markWindowKnown",function(){return j}),e.d(t,"serializeMessage",function(){return Y}),e.d(t,"deserializeMessage",function(){return Q}),e.d(t,"ProxyWindow",function(){return F}),e.d(t,"cleanUpWindow",function(){return Dn}),e.d(t,"Promise",function(){return a.a}),e.d(t,"bridge",function(){return In}),e.d(t,"parent",function(){return jn}),e.d(t,"send",function(){return vn}),e.d(t,"requestPromises",function(){return pn}),e.d(t,"request",function(){return mn}),e.d(t,"sendToParent",function(){return yn}),e.d(t,"client",function(){return gn}),e.d(t,"on",function(){return bn}),e.d(t,"listen",function(){return En}),e.d(t,"once",function(){return _n}),e.d(t,"listener",function(){return Wn}),e.d(t,"CONFIG",function(){return w}),e.d(t,"disable",function(){return Sn}),t.default=r},function(n,t,e){"use strict";function r(n){return"[object RegExp]"===Object.prototype.toString.call(n)}var o=e(5);t.d=c,t.a=f,t.c=d,t.f=l,t.h=w,t.j=function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(n===window)return!1}catch(n){return!0}try{if(!n)return!0}catch(n){return!0}try{if(n.closed)return!0}catch(n){return!n||n.message!==i}if(t&&w(n))try{if(n.mockclosed)return!0}catch(n){}try{if(!n.parent||!n.top)return!0}catch(n){}var e=function(n,t){for(var e=0;e<n.length;e++)try{if(n[e]===t)return e}catch(n){}return-1}(m,n);if(-1!==e){var r=v[e];if(r&&function(n){if(!n.contentWindow)return!0;if(!n.parentNode)return!0;var t=n.ownerDocument;return!(!t||!t.documentElement||t.documentElement.contains(n))}(r))return!0}return!1},t.k=function(n){if(function(){for(var n=0;n<m.length;n++){var t=!1;try{t=m[n].closed}catch(n){}t&&(v.splice(n,1),m.splice(n,1))}}(),n&&n.contentWindow)try{m.push(n.contentWindow),v.push(n)}catch(n){}},t.e=function(n){return(n=n||window).navigator.mockUserAgent||n.navigator.userAgent},t.b=y,t.g=function(n,t){var e=y(t);if(e)return e===n;if(t===n)return!1;if(function(n){if(n){try{if(n.top)return n.top}catch(n){}if(u(n)===n)return n;try{if(h(window,n)&&window.top)return window.top}catch(n){}try{if(h(n,window)&&window.top)return window.top}catch(n){}for(var t=0,e=function n(t){for(var e=[],r=0,o=p(t),i=null==o?0:o.length;r<i;r++){var a=o[r];e.push(a);for(var u=0,c=n(a),s=null==c?0:c.length;u<s;u++){var f=c[u];e.push(f)}}return e}(n),r=null==e?0:e.length;t<r;t++){var o=e[t];try{if(o.top)return o.top}catch(n){}if(u(o)===o)return o}}}(t)===t)return!1;for(var r=0,o=p(n),i=null==o?0:o.length;r<i;r++)if(o[r]===t)return!0;return!1},t.l=function n(t,e){if("string"==typeof t){if("string"==typeof e)return t===o.b||e===t;if(r(e))return!1;if(Array.isArray(e))return!1}return r(t)?r(e)?t.toString()===e.toString():!Array.isArray(e)&&Boolean(e.match(t)):!!Array.isArray(t)&&(Array.isArray(e)?JSON.stringify(t)===JSON.stringify(e):!r(e)&&t.some(function(t){return n(t,e)}))},t.m=function(n){return Array.isArray(n)?"("+n.join(" | ")+")":r(n)?"RegExp("+n.toString():n.toString()},t.i=function(n){try{if(n===window)return!0}catch(n){if(n&&n.message===i)return!0}try{if("[object Window]"===Object.prototype.toString.call(n))return!0}catch(n){if(n&&n.message===i)return!0}try{if(window.Window&&n instanceof window.Window)return!0}catch(n){if(n&&n.message===i)return!0}try{if(n&&n.self===n)return!0}catch(n){if(n&&n.message===i)return!0}try{if(n&&n.parent===n)return!0}catch(n){if(n&&n.message===i)return!0}try{if(n&&n.top===n)return!0}catch(n){if(n&&n.message===i)return!0}try{n&&n.__cross_domain_utils_window_check__}catch(n){return!0}return!1};var i="Call was rejected by callee.\r\n";function a(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.a.ABOUT}function u(n){if(n)try{if(n.parent&&n.parent!==n)return n.parent}catch(n){}}function c(n){if(n&&!u(n))try{return n.opener}catch(n){}}function s(n){try{return n&&n.location&&n.location.href,!0}catch(n){}return!1}function f(n){var t=(n=n||window).location;if(!t)throw new Error("Can not read window location");var e=t.protocol;if(!e)throw new Error("Can not read window protocol");if(e===o.a.FILE)return o.a.FILE+"//";if(e===o.a.ABOUT){var r=u(n);return r&&s(r)?f(r):o.a.ABOUT+"//"}var i=t.host;if(!i)throw new Error("Can not read window host");return e+"//"+i}function d(n){var t=f(n=n||window);return t&&n.mockDomain&&0===n.mockDomain.indexOf(o.a.MOCK)?n.mockDomain:t}function l(n){try{if(n===window)return!0}catch(n){}try{var t=Object.getOwnPropertyDescriptor(n,"location");if(t&&!1===t.enumerable)return!1}catch(n){}try{if(a(n)&&s(n))return!0}catch(n){}try{if(f(n)===f(window))return!0}catch(n){}return!1}function w(n){if(!l(n))return!1;try{if(n===window)return!0;if(a(n)&&s(n))return!0;if(d(window)===d(n))return!0}catch(n){}return!1}function h(n,t){if(!n||!t)return!1;var e=u(t);return e?e===n:-1!==function(n){var t=[];try{for(;n.parent!==n;)t.push(n.parent),n=n.parent}catch(n){}return t}(t).indexOf(n)}function p(n){var t=[],e=void 0;try{e=n.frames}catch(t){e=n}var r=void 0;try{r=e.length}catch(n){}if(0===r)return t;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=e[o]}catch(n){continue}t.push(i)}return t}for(var a=0;a<100;a++){var u=void 0;try{u=e[a]}catch(n){return t}if(!u)return t;t.push(u)}return t}var m=[],v=[];function y(n){return c(n=n||window)||u(n)||void 0}},function(n,t){},function(n,t,e){"use strict";e(3),e(8)},function(n,t,e){"use strict";e(3)},function(n,t,e){"use strict";e(1),e(0)},function(n,t){},function(n,t,e){"use strict";e(3)},function(n,t,e){"use strict"},function(n,t,e){"use strict";e(1),e(3)}])});
//# sourceMappingURL=post-robot.min.js.map